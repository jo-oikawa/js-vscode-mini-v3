<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Welcome • Onboarding</title>
  <style>
    /* VS Code-ish palette to match index.html */
    :root {
      --editor-background: #1e1e1e;
      --foreground: #d4d4d4;
      --descriptionForeground: #6b7280;
      --contrastBorder: #2a2a2a;
      --focusBorder: #007acc;
      --textLink-foreground:#3794ff;
      --focusBorder-dark:#005a9e;
      --focusBorder-intro:#0a2f54; /* deeper blue for intro CTA */
      --errorForeground:#f44747;
      --panel-bg:#1b1b1b;
      --titlebar-bg:#1f1f1f;
      --font-ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --fs-ui: 13px;
      --max-w: 920px;
      --radius: 12px;
      --widget-shadow: 0 18px 60px rgba(0,0,0,.45);
      --header-h: 56px;
    }

    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; background: var(--editor-background); color: var(--foreground); font-family: var(--font-ui); font-size: var(--fs-ui); }
    /* Page-level scroll snapping for step-by-step progression */
    html { scroll-snap-type: y mandatory; scroll-padding-top: var(--header-h); }

    /* Minimal header (no VS Code chrome) */
    .header {
      position: sticky; top: 0; z-index: 10;
      display: grid; grid-template-columns: 1fr auto; align-items: center;
      gap: 10px; padding: 10px 16px; border-bottom: 1px solid var(--contrastBorder);
      background: linear-gradient(180deg, var(--titlebar-bg), rgba(31,31,31,.85));
      backdrop-filter: blur(6px);
      min-height: var(--header-h);
    }
    .brand { display: flex; align-items: center; gap: 10px; color: #ccc; font-weight: 600; letter-spacing: .02em; }
    .brand .dot { width: 10px; height: 10px; border-radius: 999px; }
    .dot.red { background: #ff5f57; }
    .dot.yellow { background: #febc2e; }
    .dot.green { background: #28c840; }
    .win-dots { display: inline-flex; gap: 6px; opacity:.85 }
    .skip { color: var(--descriptionForeground); text-decoration: none; border: 1px solid var(--contrastBorder); padding: 6px 10px; border-radius: 8px; }
    .skip:hover { color: #fff; border-color: #3a3a3a; background: rgba(255,255,255,.06); }

    /* Page structure */
    .wrap { min-height: 100%; }
    /* Two-column shell: left sticky blueprint, right scrolling content */
    .onboard { width: min(1160px, 92vw); margin: 0 auto; display: grid; grid-template-columns: 1.05fr 1.35fr; gap: 20px; align-items: start; }
    .viz-col { position: sticky; top: calc(var(--header-h) + 16px); height: calc(100vh - var(--header-h) - 32px); display: flex; align-items: center; }
    .steps { display: block; }

    .step {
      position: relative;
      background: transparent;
      border: 0;
      border-radius: 0;
      box-shadow: none;
      overflow: hidden;
      display: grid; grid-template-columns: 1fr; gap: 0; row-gap: 6px;
      align-content: center; /* vertically center header + body as a block */
      height: calc(100vh - var(--header-h));
      padding-top: clamp(8px, 2vh, 24px);
      padding-bottom: clamp(8px, 2vh, 24px);
      scroll-snap-align: start; scroll-snap-stop: always;
      opacity: 0; transform: translateY(24px) scale(.98);
      transition: opacity .5s ease, transform .6s cubic-bezier(.2, .6, 0, 1);
      will-change: opacity, transform;
    }
    .step.visible { opacity: 1; transform: translateY(0) scale(1); }
    .step-header { padding: 12px 18px 4px; border-bottom: 0; background: transparent; }
    .eyebrow { color: var(--descriptionForeground); text-transform: uppercase; font-size: 11px; letter-spacing: .08em; font-weight: 600; }
    .title { font-size: 20px; font-weight: 700; margin-top: 6px; color: #fff; }
    .step[data-stage="0"] .title { font-size: 26px; }
    .desc { color: var(--foreground); opacity: .85; margin-top: 4px; }

    .step-body { padding: 8px 18px 12px; display: grid; gap: 10px; }

    /* Constrain inner content width while keeping the scroller full-width */
    /* Right column content spans its column width */
    .onboard .steps .step > .step-header,
    .onboard .steps .step > .step-body { width: 100%; margin: 0; }
    .two-col { display: grid; grid-template-columns: 1.2fr .8fr; gap: 18px; align-items: stretch; }
    .two-col .left { min-height: 340px; }
    .two-col .right { display: grid; gap: 12px; align-content: start; }
    /* Stack options vertically for readability */
    .choice-list { display: grid; grid-template-columns: 1fr; gap: 10px; }
    .choice {
      display: grid; gap: 6px; padding: 10px; border: 1px solid rgba(255,255,255,.08); border-radius: 10px;
      background: rgba(255,255,255,.02);
    }
    .choice:hover { border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.04); }
    .choice label { display: flex; gap: 12px; align-items: center; cursor: pointer; }
    /* Modern inputs: checkboxes and radios */
    .choice input { appearance: none; -webkit-appearance: none; display: inline-grid; place-content: center; margin: 0; width: 18px; height: 18px; border-radius: 6px; border: 1.5px solid rgba(255,255,255,.28); background: rgba(255,255,255,.02); transition: background-color .18s ease, border-color .18s ease, box-shadow .18s ease, transform .18s ease; }
    .choice input[type="radio"] { border-radius: 999px; }
    .choice label:hover input { border-color: rgba(255,255,255,.44); }
    .choice input:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(55,148,255,.35); border-color: var(--focusBorder); }
    /* Checkbox checkmark */
    .choice input[type="checkbox"]::after { content: ""; width: 10px; height: 6px; border: 2px solid transparent; border-right: 0; border-top: 0; transform: rotate(-45deg) scale(0); transform-origin: center; transition: transform .18s ease-in-out, border-color .18s ease; }
    .choice input[type="checkbox"]:checked { background: linear-gradient(180deg, var(--textLink-foreground), var(--focusBorder)); border-color: var(--focusBorder); }
    .choice input[type="checkbox"]:checked::after { border-color: #fff; transform: rotate(-45deg) scale(1); }
    /* Radio inner dot */
    .choice input[type="radio"]::after { content: ""; width: 10px; height: 10px; border-radius: 999px; background: transparent; transform: scale(0); transition: transform .18s ease-in-out, background-color .18s ease; }
    .choice input[type="radio"]:checked { border-color: var(--focusBorder); background: rgba(0,122,204,.15); }
    .choice input[type="radio"]:checked::after { background: var(--focusBorder); transform: scale(1); }
    .pill { display:inline-flex; align-items:center; gap:6px; padding:8px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.14); color:#cfeaff; background: rgba(0,122,204,.18); }

    .actions { display: flex; gap: 10px; align-items: center; margin-top: 8px; }
    .btn { background: transparent; color: #cfeaff; border: 1px solid var(--focusBorder); padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 600; }
    .btn:hover { background: rgba(0,122,204,.18); }
    .btn.secondary { border-color: #3a3a3a; color: var(--foreground); }
    .btn.secondary:hover { background: rgba(255,255,255,.06); }
    .btn.primary { background: var(--focusBorder); border-color: var(--focusBorder); color: #fff; }
    .btn.primary:hover { background: var(--textLink-foreground); border-color: var(--textLink-foreground); }

    /* Keep CTA fixed so it stays visible while steps scroll */
    .footer-cta { position: fixed; left: 0; right: 0; bottom: 42px; display:flex; justify-content:center; pointer-events:none; }
    .footer-cta .cta-card { pointer-events:auto; display:flex; align-items:center; gap:10px; padding: 10px 12px; border-radius: 999px; background: rgba(37,37,38,.85); border:1px solid rgba(255,255,255,.12); box-shadow: var(--widget-shadow); min-height: 48px; transition: background-color .18s ease, border-color .18s ease, box-shadow .18s ease, transform .18s ease; }
    .progress { color: var(--descriptionForeground); font-size: 12px; }

    /* Final step: make the entire floating nav blue and wider */
    .footer-cta .cta-card.final { background: var(--focusBorder); border-color: var(--focusBorder); color: #fff; min-width: 420px; justify-content: center; }
    /* Intro (stage 0): also fill solid blue, no inner pill gap */
    .footer-cta .cta-card.intro { background: var(--focusBorder-intro); border-color: var(--textLink-foreground); color: #fff; min-width: 260px; justify-content: center; }
    .footer-cta .cta-card a { text-decoration: none; }
    .footer-cta .cta-card.final a { background: transparent !important; border: 0 !important; color: #fff !important; padding: 0; font-weight: 700; }
    /* Remove pill visuals inside intro so text sits flush */
    .footer-cta .cta-card.intro .pill { background: transparent; border: 0; padding: 0; color: inherit; }
    /* Subtle hover for Start Building */
    .footer-cta .cta-card.final:hover, .footer-cta .cta-card.final a:hover { background: var(--focusBorder); border-color: var(--textLink-foreground); box-shadow: 0 10px 24px rgba(55,148,255,.2); transform: none; }

    /* Blueprint visualization (left side) */
    .viz {
      position: relative;
      width: 100%;
      height: auto;
      aspect-ratio: 16/10; /* more monitor-like, less tall */
      min-height: 300px;
      max-height: calc(100vh - var(--header-h) - 48px);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 10px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,0)) 0 0/100% 100%,
        repeating-linear-gradient(0deg, rgba(55,148,255,.08) 0, rgba(55,148,255,.08) 1px, transparent 1px, transparent 14px),
        repeating-linear-gradient(90deg, rgba(55,148,255,.08) 0, rgba(55,148,255,.08) 1px, transparent 1px, transparent 14px);
      overflow: hidden;
    }
    .viz .frame { position: absolute; inset: 10px; border: 1px dashed rgba(55,148,255,.35); border-radius: 8px; }
    .viz .titlebar { position: absolute; left: 14px; right: 14px; top: 16px; height: 26px; border: 1px dashed rgba(55,148,255,.45); border-radius: 6px; }
    .viz .activity { position: absolute; top: 52px; bottom: 38px; left: 14px; width: 36px; border: 1px dashed rgba(55,148,255,.35); border-radius: 6px; }
    .viz .sidebar { position: absolute; top: 52px; bottom: 38px; left: 60px; width: 220px; border: 1px dashed rgba(55,148,255,.35); border-radius: 6px; }
    .viz .editor { position: absolute; top: 52px; right: 14px; bottom: 140px; left: 290px; border: 1px dashed rgba(55,148,255,.35); border-radius: 6px; }
    .viz .panel { position: absolute; left: 290px; right: 14px; bottom: 64px; height: 68px; border: 1px dashed rgba(55,148,255,.25); border-radius: 6px; }
    .viz .status { position: absolute; left: 14px; right: 14px; bottom: 16px; height: 26px; border: 1px dashed rgba(55,148,255,.35); border-radius: 6px; }
    /* Details fill appearing with stages */
    .viz .fill { position: absolute; inset: 0; border-radius: inherit; opacity: 0; transition: opacity .45s ease; }
    .viz.stage-2 .editor .fill { background: rgba(255,255,255,.02); opacity: 1; }
    .viz.stage-3 .sidebar .fill { background: rgba(255,255,255,.03); opacity: 1; }
    .viz.stage-3 .panel .fill { background: rgba(255,255,255,.02); opacity: 1; }
    .viz.stage-4 .titlebar .fill { background: rgba(0,122,204,.22); opacity: .7; }
    .viz.stage-4 .status .fill { background: rgba(255,255,255,.05); opacity: .8; }
    .viz.stage-4 .editor .fill { background: rgba(255,255,255,.04); opacity: 1; }
    .viz.stage-4 .activity .fill { background: rgba(255,255,255,.04); opacity: .7; }

    @media (max-width: 860px) {
      .onboard { grid-template-columns: 1fr; }
      .viz-col { position: relative; top: auto; height: auto; }
    }

    @media (prefers-reduced-motion: reduce) {
      .step { transition: none !important; }
    }

    /* Scroll-linked fade in/out when supported */
    @keyframes stepFade {
      0% { opacity: .25; transform: translateY(18px) scale(.985); }
      50% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: .25; transform: translateY(-18px) scale(.985); }
    }
    @supports (animation-timeline: view()) {
      .step {
        animation-name: stepFade;
        animation-timing-function: linear;
        animation-timeline: view(block);
        animation-range: entry 10% exit 90%;
        animation-fill-mode: both;
      }
      @media (prefers-reduced-motion: reduce) {
        .step { animation: none !important; }
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="brand">
        <span class="win-dots"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></span>
        <span>Welcome</span>
      </div>
      <a class="skip" href="./index.html" title="Skip onboarding">Skip</a>
    </div>

    <div class="onboard">
      <aside class="viz-col">
        <div id="viz" class="viz stage-0" aria-hidden="true">
          <div class="frame"></div>
          <div class="titlebar"><div class="fill"></div></div>
          <div class="activity"><div class="fill"></div></div>
          <div class="sidebar"><div class="fill"></div></div>
          <div class="editor"><div class="fill"></div></div>
          <div class="panel"><div class="fill"></div></div>
          <div class="status"><div class="fill"></div></div>
        </div>
      </aside>
      <main class="steps" id="steps">
      <!-- Welcome Screen -->
      <section class="step" data-stage="0">
        <div class="step-header">
          <div class="title">Welcome to VS Code</div>
          <div class="desc">A quick, focused setup to tailor your environment. Scroll to begin.</div>
        </div>
        <div class="step-body">
            <!-- Removed in-content scroll hint to rely on floating nav -->
        </div>
      </section>

      <!-- Stage 1: Layout selection with blueprint outline -->
      <section class="step" data-stage="1">
        <div class="step-header">
           <div class="eyebrow">Step 1 of 4</div>
          <div class="title">Choose your layout</div>
          <div class="desc">Pick a layout preset. You can fine-tune later.</div>
        </div>
        <div class="step-body">
          <div class="choice-list">
            <div class="choice">
              <label>
                <input type="radio" name="layout" value="classic" checked />
                <span>Classic: Sidebar left, Panel bottom</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="radio" name="layout" value="zen" />
                <span>Zen: Minimal chrome, focus mode</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="radio" name="layout" value="wide-panel" />
                <span>Pro: Wide panel, chat docked</span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Stage 2: Theme selection; visualization gains detail -->
      <section class="step" data-stage="2">
        <div class="step-header">
           <div class="eyebrow">Step 2 of 4</div>
          <div class="title">Pick a theme</div>
          <div class="desc">Choose how your editor looks and feels.</div>
        </div>
        <div class="step-body">
          <div class="choice-list">
            <div class="choice">
              <label>
                <input type="radio" name="theme" value="dark" checked />
                <span>Dark (Default)</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="radio" name="theme" value="hc" />
                <span>High Contrast</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="radio" name="theme" value="light" />
                <span>Light</span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Stage 3: Customization; visualization closer to full fidelity -->
      <section class="step" data-stage="3">
        <div class="step-header">
           <div class="eyebrow">Step 3 of 4</div>
          <div class="title">Customize your editor</div>
          <div class="desc">A few optional tweaks to match your flow.</div>
        </div>
        <div class="step-body">
          <div class="choice-list">
            <div class="choice">
              <label>
                <input type="checkbox" name="prefs" value="line-wrap" checked />
                <span>Enable soft wrap for long lines</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="checkbox" name="prefs" value="minimap" />
                <span>Show code minimap</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="checkbox" name="prefs" value="ai" />
                <span>Turn on inline AI suggestions</span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Stage 4: Resources + big CTA; visualization final -->
      <section class="step" data-stage="4">
        <div class="step-header">
           <div class="eyebrow">Step 4 of 4</div>
          <div class="title">Get started fast</div>
          <div class="desc">Pick resources to guide your first session, then start building.</div>
        </div>
        <div class="step-body">
          <div class="choice-list">
            <div class="choice">
              <label>
                <input type="checkbox" name="resources" value="tour" checked />
                <span>Guided tour (5 min)</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="checkbox" name="resources" value="shortcuts" />
                <span>Keyboard shortcuts cheat sheet</span>
              </label>
            </div>
            <div class="choice">
              <label>
                <input type="checkbox" name="resources" value="examples" />
                <span>Open sample projects</span>
              </label>
            </div>
          </div>
        </div>
      </section>
      </main>
    </div>

    <!-- Sticky progress CTA -->
    <div class="footer-cta" aria-hidden="true">
      <div class="cta-card" id="ctaCard">
        <span class="pill">Scroll down ↓</span>
      </div>
    </div>
  </div>

  <script>
    // Intersection Observer to reveal steps on scroll
    const steps = Array.from(document.querySelectorAll('.step'));
    const stepsContainer = document.getElementById('steps');
    const viz = document.getElementById('viz');
    const ctaCard = document.getElementById('ctaCard');
    let currentStage = 0;
    const stageValues = steps.map(s => Number(s.dataset.stage)).filter(n => !Number.isNaN(n));
    const minStage = Math.min(...stageValues);
    const maxStage = Math.max(...stageValues);

    function setVizStage(stage) {
      if (!viz) return;
      viz.classList.forEach(c => { if (c.startsWith('stage-')) viz.classList.remove(c); });
      viz.classList.add(`stage-${stage}`);
    }

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          const stageNum = Number(entry.target.dataset.stage);
          if (!Number.isNaN(stageNum)) {
            currentStage = stageNum;
            renderCTA(currentStage);
            setVizStage(currentStage);
          }
        }
      });
    }, { root: null, rootMargin: '0px', threshold: 0.35 });

    steps.forEach(s => io.observe(s));

    function renderCTA(stage) {
      // Reset final style by default
      ctaCard.classList.remove('final', 'intro');
      if (stage === 0) {
        ctaCard.classList.add('intro');
        ctaCard.innerHTML = `<span class=\"pill\">Scroll down ↓</span>`;
        return;
      }
      if (stage >= maxStage) {
        ctaCard.classList.add('final');
        ctaCard.innerHTML = `<a href=\"./index.html\" data-action=\"enter\">Start Building</a>`;
        return;
      }
      // Stages 1..(maxStage-1): show step with arrows
        const stepLabel = `Step ${stage} of ${maxStage}`;
      ctaCard.innerHTML = `
        <button class="btn secondary" data-action="prev-stage" aria-label="Previous">
          ←
        </button>
        <span class="progress">${stepLabel}</span>
        <button class="btn secondary" data-action="next-stage" aria-label="Next">
          →
        </button>
      `;
    }

    function scrollToStage(targetStage) {
      const el = steps.find(s => Number(s.dataset.stage) === targetStage);
      if (el) {
        el.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' });
      }
    }

    // Wireframe-only: persist simple choices for future use
    const SAVE_KEY = 'onboarding-wireframe-choices';
    function readChoices() {
      try { return JSON.parse(localStorage.getItem(SAVE_KEY)) || {}; } catch { return {}; }
    }
    function writeChoices(obj) {
      try { localStorage.setItem(SAVE_KEY, JSON.stringify(obj)); } catch {}
    }
    function collectChoices() {
      const data = { layout: null, theme: null, prefs: [], extras: [], resources: [] };
      const layout = document.querySelector('input[name="layout"]:checked');
      data.layout = layout ? layout.value : null;
      const theme = document.querySelector('input[name="theme"]:checked');
      data.theme = theme ? theme.value : null;
      document.querySelectorAll('input[name="prefs"]:checked').forEach(i => data.prefs.push(i.value));
      document.querySelectorAll('input[name="extras"]:checked').forEach(i => data.extras.push(i.value));
      document.querySelectorAll('input[name="resources"]:checked').forEach(i => data.resources.push(i.value));
      return data;
    }
    function applyChoices() {
      const saved = readChoices();
      if (!saved || typeof saved !== 'object') return;
      if (saved.layout) { const el = document.querySelector(`input[name="layout"][value="${saved.layout}"]`); if (el) el.checked = true; }
      if (saved.theme) { const el = document.querySelector(`input[name="theme"][value="${saved.theme}"]`); if (el) el.checked = true; }
      (saved.prefs || []).forEach(v => { const el = document.querySelector(`input[name="prefs"][value="${v}"]`); if (el) el.checked = true; });
      (saved.extras || []).forEach(v => { const el = document.querySelector(`input[name="extras"][value="${v}"]`); if (el) el.checked = true; });
      (saved.resources || []).forEach(v => { const el = document.querySelector(`input[name="resources"][value="${v}"]`); if (el) el.checked = true; });
    }
    applyChoices();
    // Initialize viz state
    setVizStage(currentStage);

    // Fallback fade logic for browsers without CSS view-timeline support
    const reduceMotionMql = window.matchMedia('(prefers-reduced-motion: reduce)');
    const reduceMotion = !!reduceMotionMql && reduceMotionMql.matches;
    const supportsViewTimeline = typeof CSS !== 'undefined' && CSS.supports && CSS.supports('animation-timeline: view()');

    function updateFade() {
      if (reduceMotion || supportsViewTimeline) return;
      const vh = window.innerHeight || document.documentElement.clientHeight;
      const viewportCenter = vh / 2;
      for (const s of steps) {
        const r = s.getBoundingClientRect();
        const stepCenter = r.top + r.height / 2;
        const dist = Math.abs(stepCenter - viewportCenter);
        const maxDist = vh / 2;
        let t = 1 - (dist / maxDist); // 0 at edges, 1 at center
        if (t < 0) t = 0; if (t > 1) t = 1;
        const minOpacity = 0.25;
        const opacity = minOpacity + (1 - minOpacity) * t;
        const dy = (1 - t) * 18 * (stepCenter < viewportCenter ? 1 : -1);
        const scale = 0.985 + 0.015 * t;
        s.style.opacity = opacity.toFixed(3);
        s.style.transform = `translateY(${dy.toFixed(1)}px) scale(${scale.toFixed(3)})`;
      }
    }

    let ticking = false;
    function scheduleFadeUpdate() {
      if (reduceMotion || supportsViewTimeline) return;
      if (!ticking) {
        ticking = true;
        requestAnimationFrame(() => { ticking = false; updateFade(); });
      }
    }

    window.addEventListener('scroll', scheduleFadeUpdate, { passive: true });
    window.addEventListener('resize', scheduleFadeUpdate, { passive: true });
    scheduleFadeUpdate();

    document.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-action]');
      if (!btn) return;
      const act = btn.getAttribute('data-action');
      if (act === 'prev-stage') {
        const target = Math.max(minStage, currentStage - 1);
        if (target !== currentStage) scrollToStage(target);
        return;
      }
      if (act === 'next-stage') {
        const target = Math.min(maxStage, currentStage + 1);
        if (target !== currentStage) scrollToStage(target);
        return;
      }
      if (act === 'save') {
        writeChoices(collectChoices());
        btn.textContent = 'Saved';
        setTimeout(() => btn.textContent = 'Save choices', 1200);
      }
      if (act === 'preview-starter') {
        // Minimal wireframe behavior: flash state capture
        writeChoices(collectChoices());
        btn.textContent = 'Previewing…';
        setTimeout(() => btn.textContent = 'Preview', 900);
      }
      if (act === 'enter') {
        writeChoices(collectChoices());
      }
    });
  </script>
</body>
</html>
